<!-- Why we need Async and Await in Js   -->
 <!-- Async and Await are used to handle asynchronous operations in JavaScript more easily and readably. -->
    <!-- They allow you to write asynchronous code that looks and behaves like synchronous code, 
     making it easier to understand and maintain. -->
     <!-- This is particularly useful when dealing with operations like API calls, file reading, or any other tasks that take time to complete. -->
      <!-- following are the steps to implement Async/Await in JavaScript -->
    
          <!-- <li>Declare a function as async using the async keyword.</li>
          <li>Use the await keyword to pause the execution until a Promise is resolved.</li>
          <li>Handle errors using try...catch blocks.</li> -->
<!-- a example of Async/Await in action  -->
<!-- After using Async and await following output will be generated -->




<!-- If we dont use Async/Await, the output will be as follows:
Fetching data...
Data fetched: { id: 1, name: "Sample Data" }
-->

<!-- We can consider sample API calls as asynchronous operations. https://jsonplaceholder.typicode.com/comments -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- <script>
        // Simulating an asynchronous operation using a Promise
        function fetchData() {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    const data = { id: 1, name: "Sample Data" };
                    resolve(data);
                }, 2000); // Simulating a 2-second delay
            });
        }

        // Using Async/Await to handle the asynchronous operation,so we will use async keyword so that we can use 
        // await inside the function
        async function getData() {
            try {
                console.log("Fetching data...");
                const result = await fetchData(); // Awaiting the Promise to resolve so that this async function will pause here until the fetchData Promise is resolved
                console.log("Data fetched:", result);
                document.body.innerHTML += `<h2>Data Fetched:</h2><p>ID: ${result.id}, Name: ${result.name}</p>`;
            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }

        // Calling the async function
        getData();
    </script> -->

<!-- for pulling data fromn the sample API using Async and Await our code will look like this -->
 <!-- https://jsonplaceholder.typicode.com/comments -->

<!-- <script>
    async function fetchComments() {
        try {
            console.log("Fetching comments...");
            const response = await fetch('https://jsonplaceholder.typicode.com/comments');
            // Here fetch returns a Promise that resolves to the Response object representing the response to the request
            const comments = await response.json(); // Parsing the JSON response
            // Awaiting the json() method which also returns a Promise that resolves with the result of parsing the body text as JSON
            
            console.log("Comments fetched:", comments);
            document.body.innerHTML += `<h2>Comments Fetched:</h2><pre>${JSON.stringify(comments, null, 2)}</pre>`;
        } catch (error) {
            console.error("Error fetching comments:", error);
        }
    }

    // Calling the async function
    fetchComments();
</script>    -->

<!-- We should always handle exception while working with asynchronous code ie with Async and await -->
   <!-- <p>In the above example, we used try...catch blocks to handle any errors that might occur during the fetching and processing of comments. This is important because:</p>
   
       <li>Asynchronous operations can fail for various reasons (e.g., network issues, server errors).</li>
       <li>Using try...catch allows us to gracefully handle errors and provide feedback to the user.</li>
       <li>It helps in debugging by catching errors at the point they occur.</li> -->

<!-- So updated code will be like below -->
   <script>
       async function fetchComments() {
           try {
               console.log("Fetching comments...");
               const response = await fetch('https://jsonplaceholder.typicode.com/comments');
               const comments = await response.json();
               console.log("Comments fetched:", comments);
               document.body.innerHTML += `<h2>Comments Fetched:</h2><pre>${JSON.stringify(comments, null, 2)}</pre>`;
           } catch (error) {
               console.error("Error fetching comments:", error);
           }
       }

       // Calling the async function
       fetchComments();
   </script>

<!-- Another variation of Async is combining multiple Async operations -->

<script>
    async function fetchData() {
        try {
            const [comments, users] = await Promise.all([
                fetch('https://jsonplaceholder.typicode.com/comments').then(res => res.json()),
                fetch('https://jsonplaceholder.typicode.com/users').then(res => res.json())
            ]);
            console.log("Comments fetched:", comments);
            console.log("Users fetched:", users);
        } catch (error) {
            console.error("Error fetching data:", error);
        }
    }

    // Calling the async function
    fetchData();
</script>

</body>
</html>
